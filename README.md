# Парсер вакансий HeadHunter с сохранением в БД

## Описание

Приложение для работы с API HeadHunter и базой данных PostgreSQL. Программа получает данные о вакансиях через API HeadHunter, сохраняет информацию о работодателях (компаниях) и их вакансиях в базу данных, а также предоставляет возможность выполнять различные выборки данных по заданным критериям.

## Технологии
- Python 3.12
- PostgreSQL
- HeadHunter API
- Poetry (управление зависимостями)

## Установка и настройка

1. Клонируйте репозиторий:

    ```bash
    git clone <repository-url>
    ```

2. Установите зависимости с помощью Poetry:

    ```bash
    poetry install
    ```

3. Создайте файл `database.ini` в корневой директории проекта со следующим содержанием:

    ```bash
    [postgresql]
    host=localhost
    user=postgres
    password=ваш_пароль
    port=ваш_порт
    ```

## Структура проекта

### Основные модули:
- **main.py** - основная логика проекта и интерфейс взаимодействия с пользователем
- **config.py** - модуль для чтения конфигурационных файлов

### Модули в директории src:
1. **database_maker.py**
   - Создание базы данных и необходимых таблиц
   - Основная функция: `create_db(db_name, params)`

2. **db_manager.py**
   - Класс `DBManager` для работы с базой данных
   - Методы:
     * `get_companies_and_vacancies_count()` - список компаний и количество их вакансий
     * `get_all_vacancies()` - все вакансии
     * `get_avg_salary()` - средняя зарплата
     * `get_vacancies_with_higher_salary()` - вакансии с зарплатой выше средней
     * `get_vacancies_with_keyword(keyword)` - поиск вакансий по ключевому слову

3. **head_hunter_api.py**
   - Абстрактный класс `Parser`
   - Класс `HeadHunterAPI` для взаимодействия с API HeadHunter
   - Параметры запросов:
     * URL: https://api.hh.ru/vacancies
     * Лимит: 100 вакансий на страницу

4. **db_filler.py**
   - Функция `into_date_to_database()` для заполнения БД данными

5. **utils.py**
   - Вспомогательные функции:
     * `get_employer_to_dict()` - форматирование данных о работодателях
     * `get_vacancies_to_dict()` - форматирование данных о вакансиях

## Использование

1. Настройте параметры подключения к БД в файле database.ini
2. Запустите main.py:

    ```bash
    poetry run python main.py
    ```

## Функциональность
- Получение данных о вакансиях через API HeadHunter
- Сохранение данных в PostgreSQL
- Выполнение различных SQL-запросов для анализа данных
- Поиск вакансий по ключевым словам
- Анализ зарплат и статистики по компаниям